(function(t){function e(e){for(var r,s,a=e[0],d=e[1],c=e[2],l=0,p=[];l<a.length;l++)s=a[l],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&p.push(i[s][0]),i[s]=0;for(r in d)Object.prototype.hasOwnProperty.call(d,r)&&(t[r]=d[r]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,a=1;a<n.length;a++){var d=n[a];0!==i[d]&&(r=!1)}r&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var r={},i={app:0},o=[];function s(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=r,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(n,r,function(e){return t[e]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],d=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var u=d;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"2e97":function(t,e,n){t.exports=n.p+"dist/img/edge_empty_hover.cdbf2225.svg"},"39d3":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=n("7591"),o=n.n(i),s=n("ecee"),a=n("c074"),d=n("ad3d"),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("drawer"),n("confirm-modal")],1)},u=[],l=(n("4989"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container mt-5"},[n("manage"),n("Canvas")],1)}),p=[],h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Element")],1)},m=[],f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"d-inline-block w-auto"},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.width,expression:"width",modifiers:{number:!0}}],attrs:{type:"text"},domProps:{value:t.width},on:{input:function(e){e.target.composing||(t.width=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),t._v(" X "),n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.height,expression:"height",modifiers:{number:!0}}],attrs:{type:"text"},domProps:{value:t.height},on:{input:function(e){e.target.composing||(t.height=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),n("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:t.add}},[t._v(" Добавить элемент ")])])},x=[],g=(n("d81d"),{computed:{id:function(){return this.$store.state.id}},methods:{getId:function(){this.$store.commit("incrementId");var t=this.id;return t}}}),v={mixins:[g],data:function(){return{els:[],width:1e3,height:2e3}},computed:{pxPerMm:function(){return this.$store.state.pxPerMm},canvasWidthInMm:function(){return this.$store.state.canvasWidthInMm},canvasHeightInMm:function(){return this.$store.state.canvasHeightInMm}},methods:{add:function(){var t=this,e=this.width,n=this.height,r=[(this.canvasWidthInMm-e)/2,(this.canvasHeightInMm-n)/2],i={id:this.getId(),position:{x:0,y:0},type:"polygon",points:[{id:this.getId(),c:r},{id:this.getId(),c:[r[0]+e,r[1]]},{id:this.getId(),c:[r[0]+e,r[1]+n]},{id:this.getId(),c:[r[0],r[1]+n]}]};i.borders=i.points.map((function(){return{id:t.getId(),type:"lineBorder",sizeArrow:"outside",radiusPosition:"usual"}})),this.$store.commit("addPart",i)}}},I=v,b=n("2877"),y=Object(b["a"])(I,f,x,!1,null,null,null),M=y.exports,E={components:{Element:M}},w=E,P=Object(b["a"])(w,h,m,!1,null,null,null),C=P.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isMounted?[n("konva")]:t._e()],2)},B=[],_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"position-relative",staticStyle:{border:"1px solid"}},[n("div",{ref:"nocontext"},[n("context-menu"),n("v-stage",{ref:"stage",attrs:{config:{width:1200,height:500,type:"stage"}},on:{click:t.deselect}},[n("v-layer",t._l(t.parts,(function(t,e){return n("part",{key:t.id,attrs:{partIndex:e,part:t}})})),1)],1)],1),n("element-menu")],1)},j=[],k=n("1157"),O=n.n(k),S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"menu",staticClass:"dropdown-menu",style:t.coords,attrs:{role:"menu"}},t._l(t.items,(function(e,r){return n("a",{key:r,staticClass:"dropdown-item",attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.handleClick(e)}}},[t._v(" "+t._s(e.name)+" ")])})),0)},A=[],T=n("5530"),L={computed:{contextMenuEvent:function(){return this.$store.state.contextMenuEvent},coords:function(){var t={top:0,left:0};return this.contextMenuEvent&&(t.top="".concat(this.contextMenuEvent.e.evt.layerY,"px"),t.left="".concat(this.contextMenuEvent.e.evt.layerX,"px")),t},parts:function(){return this.$store.getters.parts},items:function(){if(!this.contextMenuEvent)return[];var t=[],e=this.contextMenuEvent.e.target.attrs,n=this.contextMenuEvent,r=n.partIndex,i=n.borderIndex;switch(e.type){case"lineBorder":return t.push.apply(t,[{name:"Вставить точку",action:"addPoint",borderIndex:this.contextMenuEvent.borderIndex},{name:"Сделать выпуклой",isInside:!1,action:"makeBorderCurve",borderIndex:this.contextMenuEvent.borderIndex},{name:"Сделать вогнутой",isInside:!0,action:"makeBorderCurve",borderIndex:this.contextMenuEvent.borderIndex},{name:"Сделать вырез",isInside:!0,action:"makeBulgeInset",borderIndex:this.contextMenuEvent.borderIndex},{name:"Сделать выступ",isInside:!1,action:"makeBulgeInset",borderIndex:this.contextMenuEvent.borderIndex},{name:"Добавить/убрать бортик",action:"toggleSkirting",borderIndex:this.contextMenuEvent.borderIndex}]),"off"===e.sizeArrow&&t.push({name:"Показать размер",action:"showSizeArrow",borderIndex:this.contextMenuEvent.borderIndex}),this.parts[r].borders[i].edge||t.push({name:"Добавить кромку",action:"addEdge",borderIndex:this.contextMenuEvent.borderIndex}),t;case"curveBorder":return t.push({name:"Сделать прямой",action:"makeBorderLine",borderIndex:this.contextMenuEvent.borderIndex},{name:"Добавить/убрать бортик",action:"toggleSkirting",borderIndex:this.contextMenuEvent.borderIndex}),e.isInside?t.push({name:"Сделать выпуклой",isInside:!1,action:"makeBorderCurve",borderIndex:this.contextMenuEvent.borderIndex}):t.push({name:"Сделать вогнутой",isInside:!0,action:"makeBorderCurve",borderIndex:this.contextMenuEvent.borderIndex}),"off"===e.radiusPosition&&t.push({name:"Показать радиус",action:"showRadius",borderIndex:this.contextMenuEvent.borderIndex}),this.parts[r].borders[i].edge||t.push({name:"Добавить кромку",action:"addEdge",borderIndex:this.contextMenuEvent.borderIndex}),t;case"point":return t.push.apply(t,[{name:"Удалить точку",action:"deletePoint",pointIndex:this.contextMenuEvent.pointIndex},{name:"Сделать вырез",action:"makeCorderCut",pointIndex:this.contextMenuEvent.pointIndex}]),e.angleTag||t.push({name:"Показать угол",action:"showAngle",pointIndex:this.contextMenuEvent.pointIndex}),t;case"inset":case"bulge":return[{name:"Удалить выступ/вырез",action:"deleteInsetBulge",insetBulgeIndex:this.contextMenuEvent.insetBulgeIndex}];case"sizeArrow":return[{name:"Отобразить с другой стороны",action:"showInsideOutside",borderIndex:this.contextMenuEvent.borderIndex},{name:"Скрыть",action:"hide",borderIndex:this.contextMenuEvent.borderIndex}];case"radius":return[{name:"Отобразить с другой стороны",action:"showRadiusOpposite",borderIndex:this.contextMenuEvent.borderIndex},{name:"Скрыть",action:"hide",borderIndex:this.contextMenuEvent.borderIndex}];case"angleTag":return[{name:"Скрыть",action:"hide",pointIndex:this.contextMenuEvent.pointIndex}];case"edge":return[{name:"Скрыть",action:"hideEdge",borderIndex:this.contextMenuEvent.borderIndex}];default:return[]}}},watch:{contextMenuEvent:function(){O()(this.$refs.menu).dropdown("show")}},mounted:function(){var t=this;O()("body").click((function(){O()(t.$refs.menu).dropdown("hide")}))},methods:{handleClick:function(t){var e=this,n=Object(T["a"])(Object(T["a"])({},t),{},{partIndex:this.contextMenuEvent.partIndex});this.$store.commit("setContextMenuAction",n),setTimeout((function(){O()(e.$refs.menu).dropdown("hide")}),0)}}},z=L,R=Object(b["a"])(z,S,A,!1,null,null,null),D=R.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-group",{attrs:{config:t.groupConfig},on:{dragend:t.log}},[n("v-shape",{attrs:{config:Object.assign({},t.partShapeConfig,{fill:[t.currentElId,t.selectedElId].includes(t.partShapeConfig.id)?"rgba(0,0,0,0.2)":"#80808054"})},on:{mouseover:function(e){return t.$store.commit("setCurrentEl",t.partShapeConfig.id)},mouseleave:function(e){return t.$store.commit("setCurrentEl",null)}}}),t.part.insetsBulges&&t.part.insetsBulges.length?n("insets-bulges",{attrs:{part:t.part,partIndex:t.partIndex}}):t._e(),n("borders",{attrs:{part:t.part,partIndex:t.partIndex,curves:t.curves}}),n("points",{attrs:{points:t.part.points,partIndex:t.partIndex,part:t.part}})],1)},H=[],N=(n("4de4"),n("4160"),n("45fc"),n("159b"),n("2909")),W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.lineBorders,(function(e){return n("v-line",{key:e.border.id,ref:"border"+e.border.id,refInFor:!0,attrs:{config:Object.assign({},e.config,{stroke:[t.currentElId,t.selectedElId].includes(e.border.id)?"red":"black"})},on:{contextmenu:function(n){e.config.isClickable&&t.setContextMenuEvent(n,e.config.allBordersIndex)},mouseover:function(n){e.config.isClickable&&t.$store.commit("setCurrentEl",e.border.id)},mouseleave:function(n){e.config.isClickable&&t.$store.commit("setCurrentEl",null)},click:function(n){e.config.isClickable&&t.$store.commit("setSelectedElId",e.border.id)}}})})),t._l(t.curveBorders,(function(e){return n("v-arc",{key:e.border.id,ref:"border"+e.border.id,refInFor:!0,attrs:{config:Object.assign({},e.config,{stroke:[t.currentElId,t.selectedElId].includes(e.border.id)?"red":"black"})},on:{contextmenu:function(n){return t.setContextMenuEvent(n,e.config.allBordersIndex)},mouseover:function(n){return t.$store.commit("setCurrentEl",e.border.id)},mouseleave:function(e){return t.$store.commit("setCurrentEl",null)},click:function(n){return t.$store.commit("setSelectedElId",e.border.id)}}})})),t._l(t.lineBorders,(function(e){return n("size-arrow-tag",{key:"a"+e.border.id,attrs:{border:e,partIndex:t.partIndex}})})),t._l(t.curveBorders,(function(e){return n("radius-tag",{key:"c"+e.border.id,attrs:{border:e,partIndex:t.partIndex}})})),t._l(t.lineBorders.concat(t.curveBorders),(function(e){return n("edges",{key:"e"+e.border.id,attrs:{border:e,partIndex:t.partIndex}})}))],2)},F=[],J=(n("caad"),n("1266")),U=n.n(J),X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return"off"!==t.border.border.sizeArrow?n("v-group",[n("v-arrow",{attrs:{config:{points:t.params.arrowPoints,stroke:"black",fill:"black",pointerAtBeginning:!0,strokeWidth:1,pointerLength:5,pointerWidth:5}}}),n("v-label",{attrs:{config:Object.assign({},t.params.textPosition,{rotation:t.params.angle,offset:t.params.offset})},on:{mouseover:function(e){t.over=!0},mouseleave:function(e){t.over=!1},contextmenu:t.setContextMenuEvent}},[n("v-tag",{attrs:{config:{fill:"white"}}}),n("v-text",{attrs:{config:{text:t.params.lengthText,padding:t.params.padding,fontSize:t.fontSize,fontFamily:"Calibri",fill:t.over?"red":"black",type:"sizeArrow"}}})],1)],1):t._e()},K=[],Y=(n("99af"),n("d3b7"),n("25f0"),{props:["border","partIndex"],data:function(){return{over:!1}},computed:{offsetInMm:function(){return this.border.border.skirting?70:50},pxPerMm:function(){return this.$store.state.pxPerMm},fontSize:function(){return this.$store.state.fontSizeInmM.sizeArrow*this.pxPerMm},params:function(){var t=this.border.config.points,e="inside"===this.border.border.sizeArrow?-1:1,n=new U.a(t[0],t[1]),r=new U.a(t[2]-t[0],t[3]-t[1]),i=r.length(),o=r.angleDeg();o=o<0?o+360:o;var s=this.fontSize/2,a=Math.round(i/this.pxPerMm).toString(),d={x:s*a.length,y:s},c=.5*i+d.x/2,u=this.offsetInMm*this.pxPerMm;r=r.norm().rotateDeg(-90*e).multiply(new U.a(u,u)),n=r.clone().add(n);var l=n.toArray(),p=r.clone().norm().rotateDeg(90*e).multiply(new U.a(c,c)),h=p.add(n).toObject();r=r.norm().rotateDeg(90*e).multiply(new U.a(i,i)),n=r.clone().add(n);var m=n.toArray();return{arrowPoints:[].concat(Object(N["a"])(l),Object(N["a"])(m)),textPosition:h,lengthText:a,padding:0,angle:o,offset:d}},contextMenuAction:function(){return this.$store.state.contextMenuAction}},watch:{contextMenuAction:function(t){var e;t.partIndex===this.partIndex&&(t.borderIndex===this.border.config.allBordersIndex&&["showInsideOutside","hide","showSizeArrow"].includes(t.action)&&(e="hide"===t.action?"off":"showSizeArrow"===t.action||"inside"===this.border.border.sizeArrow?"outside":"inside",this.$store.commit("changeSizeArrow",{i:t.partIndex,j:t.borderIndex,sizeArrow:e})))}},methods:{setContextMenuEvent:function(t){var e=this.partIndex;this.$store.commit("setContextMenuEvent",{e:t,partIndex:e,borderIndex:this.border.config.allBordersIndex})}}}),G=Y,Q=Object(b["a"])(G,X,K,!1,null,null,null),V=Q.exports,Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return"off"!==t.border.border.radiusPosition?n("v-label",{attrs:{config:Object.assign({},t.params.textPosition,{rotation:t.params.angle,offset:t.params.offset})},on:{mouseover:function(e){t.over=!0},mouseleave:function(e){t.over=!1},contextmenu:t.setContextMenuEvent}},[n("v-tag",{attrs:{config:{fill:"white"}}}),n("v-text",{attrs:{config:{text:t.params.radiusText,padding:t.params.padding,fontSize:t.fontSize,fontFamily:"Calibri",fill:t.over?"red":"black",type:"radius"}}})],1):t._e()},tt=[],et={props:["border","partIndex"],data:function(){return{over:!1,offsetInMm:100}},computed:{pxPerMm:function(){return this.$store.state.pxPerMm},fontSize:function(){return this.$store.state.fontSizeInmM.radius*this.pxPerMm},params:function(){var t=this.border.config,e=t.x,n=t.y,r=this.border.config.points,i=new U.a(r[0],r[1]),o=new U.a(r[2]-r[0],r[3]-r[1]),s=o.angleDeg();s=s<0?s+360:s;var a=o.length()/2;o=o.norm().multiply(new U.a(a,a));var d=o.clone().add(i);i=new U.a(e,n),o=new U.a(d.x-e,d.y-n);var c=this.border.border.isInside?1:-1;c="opposite"===this.border.border.radiusPosition?-c:c;var u=this.border.config.innerRadius-this.offsetInMm*this.pxPerMm*c;o=o.norm().multiply(new U.a(u,u));var l=o.clone().add(i).toObject(),p=this.fontSize/2,h="R ".concat(Math.round(this.border.border.radius)),m={x:p*h.length/2,y:p};return{padding:0,textPosition:l,angle:s,offset:m,radiusText:h}},contextMenuAction:function(){return this.$store.state.contextMenuAction}},watch:{contextMenuAction:function(t){var e;t.partIndex===this.partIndex&&(t.borderIndex===this.border.config.allBordersIndex&&["showRadiusOpposite","hide","showRadius"].includes(t.action)&&(e="hide"===t.action?"off":"showRadius"===t.action?"usual":"usual"===this.border.border.radiusPosition?"opposite":"usual",this.$store.commit("changeRadiusPosition",{i:t.partIndex,j:t.borderIndex,radiusPosition:e})))}},methods:{setContextMenuEvent:function(t){var e=this.partIndex;this.$store.commit("setContextMenuEvent",{e:t,partIndex:e,borderIndex:this.border.config.allBordersIndex})}}},nt=et,rt=Object(b["a"])(nt,Z,tt,!1,null,null,null),it=rt.exports,ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.edge&&t.image?n("v-image",{attrs:{config:{image:t.image,x:t.params.x,y:t.params.y,width:t.sizeInPx,height:t.sizeInPx,rotation:t.params.angle,offset:{x:t.sizeInPx/2,y:t.sizeInPx/2},type:"edge"}},on:{mouseover:function(e){return t.$store.commit("setCurrentEl",t.edge.id)},mouseleave:function(e){return t.$store.commit("setCurrentEl",null)},contextmenu:t.setContextMenuEvent,click:function(e){return t.$store.commit("setSelectedElId",t.edge.id)}}}):t._e()},st=[],at=(n("2532"),{mixins:[g],props:["border","partIndex"],data:function(){return{offsetInMm:50,over:!1,sizeInMm:120}},computed:{selectedElId:function(){return this.$store.state.selectedElId},currentElId:function(){return this.$store.state.currentElId},edge:function(){return this.border.border.edge},image:function(){var t=[this.selectedElId,this.currentElId].includes(this.edge.id)?this.$store.state.files.edges["".concat(this.edge.edgeType,"Hover")]:this.$store.state.files.edges[this.edge.edgeType];return t},pxPerMm:function(){return this.$store.state.pxPerMm},sizeInPx:function(){return this.sizeInMm*this.pxPerMm},params:function(){if(!this.edge)return{};var t=this.border.border.pointsInPx;if("lineBorder"===this.border.border.type){var e=new U.a(t[0],t[1]),n=new U.a(t[2]-t[0],t[3]-t[1]),r=n.length()/2,i=n.angleDeg();i=i<0?i+180:i-180,n=n.norm().multiply(new U.a(r,r)),e=n.clone().add(e);var o=this.offsetInMm*this.pxPerMm;n=n.norm().rotateDeg(-90).multiply(new U.a(o,o));var s=n.clone().add(e).toObject(),a=s.x,d=s.y;return{angle:i,x:a,y:d}}var c=this.border.config,u=c.x,l=c.y,p=new U.a(t[0],t[1]),h=new U.a(t[2]-t[0],t[3]-t[1]),m=h.angleDeg();m=m<0?m+180:m-180;var f=h.length()/2;h=h.norm().multiply(new U.a(f,f));var x=h.clone().add(p);p=new U.a(u,l),h=new U.a(x.x-u,x.y-l);var g=this.border.border.isInside?1:-1,v=this.border.config.innerRadius-this.offsetInMm*this.pxPerMm*g;h=h.norm().multiply(new U.a(v,v));var I=h.clone().add(p).toObject();return Object(T["a"])(Object(T["a"])({},I),{},{angle:m})},contextMenuAction:function(){return this.$store.state.contextMenuAction}},watch:{contextMenuAction:function(t){if(t.partIndex===this.partIndex&&t.borderIndex===this.border.config.allBordersIndex&&["addEdge","hideEdge"].includes(t.action)){var e={i:t.partIndex,j:t.borderIndex,action:t.action};"addEdge"===t.action&&(e.id=this.getId()),this.$store.commit("addHideEdge",e)}}},methods:{setContextMenuEvent:function(t){var e=this.partIndex;this.$store.commit("setContextMenuEvent",{e:t,partIndex:e,borderIndex:this.border.config.allBordersIndex})}}}),dt=at,ct=Object(b["a"])(dt,ot,st,!1,null,null,null),ut=ct.exports,lt={mixins:[g],props:["part","partIndex","curves"],components:{SizeArrowTag:V,RadiusTag:it,Edges:ut},data:function(){return{}},computed:{selectedElId:function(){return this.$store.state.selectedElId},currentElId:function(){return this.$store.state.currentElId},pxPerMm:function(){return this.$store.state.pxPerMm},borders:function(){var t={};return this.part.borders.forEach((function(e,n){e.type in t||(t[e.type]=[]),t[e.type].push(Object(T["a"])(Object(T["a"])({},e),{},{allBordersIndex:n}))})),t},lineBorders:function(){var t=this;return this.borders.lineBorder?this.borders.lineBorder.map((function(e){var n=e.allBordersIndex?t.part.borders[e.allBordersIndex-1]:t.part.borders[t.part.borders.length-1],r=e.allBordersIndex<t.part.borders.length-1?t.part.borders[e.allBordersIndex+1]:t.part.borders[0],i=e.type,o=e.id,s=e.points,a={type:i,id:o,points:s.map((function(e){return e*t.pxPerMm})),strokeWidth:e.skirting?4:1,lineCap:n.skirting&&r.skirting?"square":"butt",hitStrokeWidth:5,allBordersIndex:e.allBordersIndex,isClickable:!["inset","bulge"].includes(e.subType),sizeArrow:e.sizeArrow};return{config:a,border:e}})):[]},curveBorders:function(){var t=this;return this.borders.curveBorder?this.borders.curveBorder.map((function(e){var n=e.allBordersIndex?t.part.borders[e.allBordersIndex-1]:t.part.borders[t.part.borders.length-1],r=e.allBordersIndex<t.part.borders.length-1?t.part.borders[e.allBordersIndex+1]:t.part.borders[0],i=e.type,o=e.id,s=e.points,a=Object(T["a"])({},t.curves[e.id]),d={type:i,id:o,points:s.map((function(e){return e*t.pxPerMm})),isInside:e.isInside,strokeWidth:e.skirting?4:1,lineJoin:n.skirting&&r.skirting?"round":"miter",hitStrokeWidth:5,allBordersIndex:e.allBordersIndex,innerRadius:a.R,outerRadius:a.R,x:a.c1.x,y:a.c1.y,angle:a.ang2*(180/Math.PI)-a.ang1*(180/Math.PI),rotation:a.ang1*(180/Math.PI),clockwise:a.isInside,radiusPosition:e.radiusPosition};return{config:d,border:e}})):[]},contextMenuAction:function(){return this.$store.state.contextMenuAction},refreshSelectedElTrigger:function(){return this.$store.state.parts.refreshSelectedElTrigger}},watch:{contextMenuAction:function(t){t.partIndex===this.partIndex&&("makeBorderCurve"===t.action?this.makeBorderCurve(t):"makeBorderLine"===t.action?this.$store.dispatch("makeBorderLine",t):"makeBulgeInset"===t.action?this.makeBulgeInset(t):"toggleSkirting"===t.action&&this.$store.commit("toggleSkirting",{i:t.partIndex,j:t.borderIndex}))},refreshSelectedElTrigger:function(){this.$refs["border".concat(this.selectedElId)][0].getNode().fire("click")}},methods:{setContextMenuEvent:function(t,e){var n=this.partIndex;this.$store.commit("setContextMenuEvent",{e:t,partIndex:n,borderIndex:e})},makeBorderCurve:function(t){var e=this.clone(this.part.borders[t.borderIndex].points),n=Math.sqrt(Math.pow(e[2]-e[0],2)+Math.pow(e[3]-e[1],2)),r=t.isInside?n:n/2+2;this.$store.dispatch("makeBorderCurve",Object.assign(t,{radius:r}))},makeBulgeInset:function(t){var e=this,n=this.clone(this.part.borders[t.borderIndex].points),r=[],i=300,o=t.isInside?1:-1,s=new U.a(n[0],n[1]),a=new U.a(n[2]-n[0],n[3]-n[1]),d=a.length(),c=a.norm();a=c.multiply(new U.a(d/3,d/3)),s=a.clone().add(s),r.push(s.toArray()),a=a.norm().rotateDeg(90*o).multiply(new U.a(i,i)),s=a.clone().add(s),r.push(s.toArray()),a=a.norm().rotateDeg(-90*o).multiply(new U.a(d/3,d/3)),s=a.clone().add(s),r.push(s.toArray()),a=a.norm().rotateDeg(-90*o).multiply(new U.a(i,i)),s=a.clone().add(s),r.push(s.toArray());var u=t.partIndex,l=t.borderIndex,p=t.isInside?"inset":"bulge",h=[],m=this.getId();r.forEach((function(t,n){var r={id:e.getId(),type:"lineBorder"};n<3&&(r.subType=p),e.$store.commit("addBorder",{partIndex:u,borderIndex:l+n+1,border:r});var i=e.getId(),o={id:i,c:t,subType:p};e.$store.commit("addPoint",{partIndex:u,pointIndex:l+n+1,point:Object(T["a"])(Object(T["a"])({},o),{},{insetBulgeId:m})}),h.push(i)}));var f={partIndex:u,pointsId:h,id:m};this.$store.commit("addInsetBulge",Object(T["a"])(Object(T["a"])({},f),{},{type:p,depth:i})),this.$store.commit("setSelectedElId",m)}}},pt=lt,ht=Object(b["a"])(pt,W,F,!1,null,null,null),mt=ht.exports,ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.allPoints,(function(e,r){return n("v-circle",{key:e.id,attrs:{config:{type:"point",x:e.cInPx[0],y:e.cInPx[1],radius:t.radius,fill:[t.currentElId,t.selectedElId].includes(e.id)?"red":"transparent",draggable:!0,angleTag:e.angleTag}},on:{mouseover:function(n){e.isClickable&&t.$store.commit("setCurrentEl",e.id)},mouseleave:function(n){e.isClickable&&t.$store.commit("setCurrentEl",null)},dragmove:function(e){return t.movePoint(e,r)},click:function(n){e.isClickable&&t.$store.commit("setSelectedElId",e.id)},contextmenu:function(n){e.isClickable&&t.setContextMenuEvent(n,r)}}})})),t._l(t.allPoints,(function(e,r){return n("angle-tag",{key:"a"+e.id,attrs:{partIndex:t.partIndex,point:e,pointIndex:r,part:t.part}})}))],2)},xt=[],gt=(n("07ac"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.point.angleTag?n("div",[n("v-label",{attrs:{config:Object.assign({},t.params.textPosition,{rotation:t.params.angle,offset:t.params.offset})},on:{mouseover:function(e){t.over=!0},mouseleave:function(e){t.over=!1},contextmenu:t.setContextMenuEvent}},[n("v-tag",{attrs:{config:{fill:"transparent"}}}),n("v-text",{attrs:{config:{text:t.params.angleText,fontSize:t.fontSize,fontFamily:"Calibri",fill:t.over?"red":"black",type:"angleTag"}}})],1),n("v-arc",{attrs:{config:{stroke:"black",strokeWidth:1,innerRadius:t.params.radius,outerRadius:t.params.radius,x:t.params.c1.x,y:t.params.c1.y,angle:t.params.ang2*(180/Math.PI)-t.params.ang1*(180/Math.PI),rotation:t.params.ang1*(180/Math.PI),clockwise:!0}}})],1):t._e()}),vt=[],It=(n("7db0"),{props:["point","partIndex","pointIndex","part"],data:function(){return{over:!1,offsetInMm:100}},computed:{pxPerMm:function(){return this.$store.state.pxPerMm},fontSize:function(){return this.$store.state.fontSizeInmM.radius*this.pxPerMm},params:function(){var t=this,e=this.part.borders.find((function(e){return e.id===t.point.bordersId[1]})),n=this.part.borders.find((function(e){return e.id===t.point.bordersId[0]})),r=e.pointsInPx,i=new U.a(r[2],r[3]),o=new U.a(r[0]-r[2],r[1]-r[3]),s=this.offsetInMm*this.pxPerMm,a=o.clone().norm().multiply(new U.a(s,s)),d=a.add(i);r=n.pointsInPx;var c=new U.a(r[2]-r[0],r[3]-r[1]);a=c.clone().norm().multiply(new U.a(s,s));var u=a.add(i),l=u.clone().subtract(d).length()/2+2,p=this.getCurve(d.toObject(),u.toObject(),l),h=p.ang1,m=p.ang2,f=p.c1,x=Math.acos(o.dot(c)/(o.length()*c.length())),g="".concat(Math.round(x*(180/Math.PI))," °");a=new U.a(u.x-d.x,u.y-d.y);var v=a.length()/2;a=a.clone().norm().multiply(new U.a(v,v)).add(d);var I=new U.a(a.x-f.x,a.y-f.y),b=l+1.2*s,y=I.clone().norm().multiply(new U.a(b,b)).add(new U.a(f.x,f.y)).toObject(),M=this.fontSize/2,E={x:M*g.length/2,y:M};return{padding:0,textPosition:y,angle:0,offset:E,angleText:g,ang1:h,ang2:m,radius:l,c1:f}},contextMenuAction:function(){return this.$store.state.contextMenuAction}},watch:{contextMenuAction:function(t){var e;t.partIndex===this.partIndex&&(t.pointIndex===this.pointIndex&&["hide","showAngle"].includes(t.action)&&("hide"===t.action?e=!1:"showAngle"===t.action&&(e={x:0,y:0}),this.$store.commit("showHideAngle",{i:t.partIndex,j:t.pointIndex,angleTag:e})))}},methods:{setContextMenuEvent:function(t){var e=this.partIndex,n=this.pointIndex;this.$store.commit("setContextMenuEvent",{e:t,partIndex:e,pointIndex:n})},getCurve:function(t,e,n){var r={x:.5*(t.x+e.x),y:.5*(t.y+e.y)},i=-(e.y-t.y),o=e.x-t.x,s=Math.sqrt(Math.pow(i,2)+Math.pow(o,2));i/=s,o/=s;var a=Math.sqrt(Math.pow(r.x-t.x,2)+Math.pow(r.y-t.y,2)),d=a/n;if(d<-1||d>1)return{};var c=Math.sqrt(1-Math.pow(d,2)),u=n*c,l={x:r.x+i*u,y:r.y+o*u},p={x:r.x-i*u,y:r.y-o*u},h=Math.atan2(t.y-l.y,t.x-l.x),m=Math.atan2(e.y-l.y,e.x-l.x),f=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),x=(e.x-t.x)/f,g=Math.acos(x),v=t.x>e.x?t.y-e.y:e.y-t.y,I=v>0?-1:1;return{c1:p,p1:t,p2:e,R:n,ang1:Math.PI+2*Math.abs(1.57-g)*I-h,ang2:Math.PI+2*Math.abs(1.57-g)*I-m}}}}),bt=It,yt=Object(b["a"])(bt,gt,vt,!1,null,null,null),Mt=yt.exports,Et={mixins:[g],components:{AngleTag:Mt},props:["points","partIndex","part"],computed:{selectedElId:function(){return this.$store.state.selectedElId},currentElId:function(){return this.$store.state.currentElId},contextMenuAction:function(){return this.$store.state.contextMenuAction},pxPerMm:function(){return this.$store.state.pxPerMm},radius:function(){return 60*this.pxPerMm},allPoints:function(){return this.points.map((function(t){var e=Object(T["a"])(Object(T["a"])({},t),{},{isClickable:!["inset","bulge"].includes(t.subType)});return e}))}},watch:{contextMenuAction:function(t){t.partIndex===this.partIndex&&("addPoint"===t.action?this.addPoint(t):"deletePoint"===t.action?this.deletePoint(t):"makeCorderCut"===t.action&&this.makeCorderCut(t))}},methods:{setContextMenuEvent:function(t,e){var n=this.partIndex;this.$store.commit("setContextMenuEvent",{e:t,partIndex:n,pointIndex:e})},movePoint:function(t,e){var n=this,r=this.partIndex,i=Object.values(t.target.position()).map((function(t){return t/n.pxPerMm}));this.$store.commit("movePoint",{pointIndex:e,partIndex:r,c:i})},addPoint:function(t){var e=t.borderIndex,n=this.part.points[e].c,r=e<this.part.points.length-1?this.part.points[e+1].c:this.part.points[0].c,i=[n[0]+(r[0]-n[0])/2,n[1]+(r[1]-n[1])/2],o=t.partIndex;this.$store.commit("addBorder",{partIndex:o,borderIndex:e+1,border:{id:this.getId(),type:"lineBorder"}}),this.$store.commit("addPoint",{partIndex:o,pointIndex:e+1,point:{id:this.getId(),c:i}})},deletePoint:function(t){this.$store.commit("deletePoint",t)},makeCorderCut:function(t){var e=this,n=t.pointIndex,r=t.partIndex,i=this.points[n],o=n?this.points[n-1]:this.points[this.points.length-1],s=[],a=300,d=new U.a(i.c[0],i.c[1]),c=new U.a(o.c[0]-i.c[0],o.c[1]-i.c[1]);c=c.norm().multiply(new U.a(a,a)),d=c.clone().add(d),s.push(d.toObject()),c=c.norm().rotateDeg(-90).multiply(new U.a(a,a)),d=c.clone().add(d),s.push(d.toArray()),c=c.norm().rotateDeg(-90).multiply(new U.a(a,a)),d=c.clone().add(d),s.push(d.toArray()),s.forEach((function(t,i){if(i){var o={id:e.getId(),type:"lineBorder"};e.$store.commit("addBorder",{partIndex:r,borderIndex:n+i,border:o});var s=e.getId();e.$store.commit("addPoint",{partIndex:r,pointIndex:n+i,point:{id:s,c:t}})}else{var a={i:r,j:n,point:t};e.$store.dispatch("changePoint",a)}}))}}},wt=Et,Pt=Object(b["a"])(wt,ft,xt,!1,null,null,null),Ct=Pt.exports,$t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",t._l(t.insetsBulges,(function(e,r){return n("v-line",{key:e.id,attrs:{config:Object.assign({},t.configs[r],{strokeWidth:[t.currentElId,t.selectedElId].includes(e.id)?2:0})},on:{mouseover:function(n){return t.$store.commit("setCurrentEl",e.id)},mouseleave:function(e){return t.$store.commit("setCurrentEl",null)},click:function(n){return t.$store.commit("setSelectedElId",e.id)},contextmenu:function(e){return t.setContextMenuEvent(e,r)}}})})),1)},Bt=[],_t=(n("cb29"),n("c740"),{props:["part","partIndex"],computed:{insetsBulges:function(){return this.part.insetsBulges},pxPerMm:function(){return this.$store.state.pxPerMm},dash:function(){return[30*this.pxPerMm,15*this.pxPerMm]},configs:function(){var t=this;return this.insetsBulges.map((function(e){return{id:e.id,points:e.pointsInPx,closed:!0,dash:t.dash,stroke:"red",type:e.type}}))},selectedElId:function(){return this.$store.state.selectedElId},currentElId:function(){return this.$store.state.currentElId},contextMenuAction:function(){return this.$store.state.contextMenuAction}},watch:{contextMenuAction:function(t){t.partIndex===this.partIndex&&"deleteInsetBulge"===t.action&&this.deleteInsetBulge(t)}},methods:{setContextMenuEvent:function(t,e){var n=this.partIndex;this.$store.commit("setContextMenuEvent",{e:t,partIndex:n,insetBulgeIndex:e})},deleteInsetBulge:function(t){var e=this,n=this.insetsBulges[t.insetBulgeIndex].pointsId,r=this.partIndex;this.$store.commit("setSelectedElId",null);var i=this.part.points.findIndex((function(t){return n.includes(t.id)}));new Array(4).fill("").forEach((function(){e.$store.commit("deletePoint",{partIndex:r,pointIndex:i})}))}}}),jt=_t,kt=Object(b["a"])(jt,$t,Bt,!1,null,null,null),Ot=kt.exports,St={props:["partIndex","part"],data:function(){return{}},components:{Borders:mt,Points:Ct,InsetsBulges:Ot},computed:{selectedElId:function(){return this.$store.state.selectedElId},currentElId:function(){return this.$store.state.currentElId},curves:function(){var t={};return this.part.borders.forEach((function(e){if("curveBorder"===e.type){var n=e.radiusInPx,r=e.pointsInPx,i={x:r[0],y:r[1]},o={x:r[2],y:r[3]},s={x:.5*(i.x+o.x),y:.5*(i.y+o.y)},a=-(o.y-i.y),d=o.x-i.x,c=Math.sqrt(Math.pow(a,2)+Math.pow(d,2));a/=c,d/=c;var u=Math.sqrt(Math.pow(s.x-i.x,2)+Math.pow(s.y-i.y,2)),l=u/n;if(!(l<-1||l>1)){var p=Math.sqrt(1-Math.pow(l,2)),h=n*p,m={x:s.x+a*h,y:s.y+d*h},f={x:s.x-a*h,y:s.y-d*h},x=Math.atan2(i.y-m.y,i.x-m.x),g=Math.atan2(o.y-m.y,o.x-m.x),v=Math.sqrt(Math.pow(o.x-i.x,2)+Math.pow(o.y-i.y,2)),I=(o.x-i.x)/v,b=Math.acos(I),y=i.x>o.x?i.y-o.y:o.y-i.y,M=y>0?-1:1;t[e.id]={c1:e.isInside?f:m,p1:i,p2:o,R:n,ang1:e.isInside?Math.PI+2*Math.abs(1.57-b)*M-x:x,ang2:e.isInside?Math.PI+2*Math.abs(1.57-b)*M-g:g,isInside:e.isInside}}}})),t},partShapeConfig:function(){var t=this.part,e=t.points,n=t.borders,r=this.curves;return{id:this.part.id,sceneFunc:function(t,i){t.beginPath(),t.moveTo.apply(t,Object(N["a"])(e[0].cInPx)),e.forEach((function(e,i){if("lineBorder"===n[i].type)t.lineTo.apply(t,Object(N["a"])(e.cInPx));else if("curveBorder"===n[i].type){var o=r[n[i].id];t.arc(o.c1.x,o.c1.y,o.R,o.ang1,o.ang2,o.isInside)}})),t.fillStrokeShape(i)}}},otherPartsBB:function(){var t=this;return this.$store.getters.boundingBoxes.filter((function(e){return e.id!==t.part.id}))},myBB:function(){return this.$store.getters.boundingBoxes[this.partIndex]},groupConfig:function(){var t=this.otherPartsBB,e=this.myBB.absolute,n=null;return{draggable:!0,dragBoundFunc:function(r){var i=r;if(t.length){var o=e.x1+r.x,s=e.x2+r.x,a=e.y1+r.y,d=e.y2+r.y,c=t.some((function(t){var r=t.relative;if(o>=r.x2||s<=r.x1)return!1;if(a>=r.y2||d<=r.y1)return!1;var c={x:0,y:0};return c.x=s>r.x2?r.x2-o:s-r.x1,c.y=d>r.y2?r.y2-a:d-r.y1,c.x<c.y&&(null===n||"x"===n)?(i.x=s>=r.x2?r.x2-e.x1:r.x1-e.x2,n="x"):(i.y=d>=r.y2?r.y2-e.y1:r.y1-e.y2,n="y"),!0}));n=c?n:null}return i}}}},methods:{log:function(t){this.setPartPosition(t.target.getPosition())},setPartPosition:function(t){this.$store.commit("setPartPosition",{i:this.partIndex,pos:t})}}},At=St,Tt=Object(b["a"])(At,q,H,!1,null,null,null),Lt=Tt.exports,zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.element?n("div",{staticClass:"d-inline-block bg-white p-4 position-absolute element-menu"},["lineBorder"===t.element.type?n("line-border"):t._e(),"curveBorder"===t.element.type?n("curve-border"):t._e(),["inset","bulge"].includes(t.element.type)?n("inset-bulge"):t._e(),"edge"===t.element.type?n("edge",{attrs:{initType:t.element.edgeType}}):t._e()],1):t._e()},Rt=[],Dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("form",{on:{submit:function(e){return e.preventDefault(),t.setBorderLength(e)}}},[n("div",{staticClass:"form-group row no-gutters"},[n("label",{staticClass:"col-auto col-form-label text-left"},[t._v("Длина")]),n("div",{staticClass:"col-auto px-1"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.lengthInMm,expression:"lengthInMm"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.lengthInMm},on:{input:function(e){e.target.composing||(t.lengthInMm=e.target.value)}}})]),n("span",{staticClass:"col-auto d-flex align-items-center"},[t._v("мм")])]),n("div",{staticClass:"form-group row no-gutters"},[t._m(0),n("div",{staticClass:"col-auto"},[n("change-line-by-end",{attrs:{element:t.element,points:t.points},on:{setChoosedPoint:function(e){t.choosedPoint=e}}})],1)])])])},qt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-auto text-left"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Установить")])])}],Ht=(n("a434"),n("96cf"),n("1da1")),Nt=n("3835"),Wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"btn-group ml-3",attrs:{role:"group",title:"За счет какой стороны менять длину"}},[n("button",{staticClass:"btn",class:["btn"+(1===t.choosed?"":"-outline")+"-secondary"],attrs:{type:"button"},on:{click:function(e){t.choosed=1}}},[n("font-awesome-icon",{style:t.angleStyle,attrs:{icon:"long-arrow-alt-right"}})],1),n("button",{staticClass:"btn",class:["btn"+(t.choosed?"-outline":"")+"-secondary"],attrs:{type:"button"},on:{click:function(e){t.choosed=0}}},[n("font-awesome-icon",{style:t.angleStyle,attrs:{icon:"long-arrow-alt-left"}})],1),n("button",{staticClass:"btn",class:["btn"+("both"===t.choosed?"":"-outline")+"-secondary"],attrs:{type:"button"},on:{click:function(e){t.choosed="both"}}},[n("font-awesome-icon",{style:t.angleStyle,attrs:{icon:"arrows-alt-h"}})],1)])},Ft=[],Jt={props:["element","points"],data:function(){return{choosed:1}},computed:{angleStyle:function(){if(!this.points)return null;var t=this.points,e=t[0],n=t[1],r=Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2)),i=(n.x-e.x)/r,o=Math.acos(i)*(180/Math.PI);return o=n.y>e.y?o:-o,{transform:"rotate(".concat(o,"deg)")}}},watch:{choosed:{handler:function(t){this.$emit("setChoosedPoint",t)},immediate:!0}}},Ut=Jt,Xt=Object(b["a"])(Ut,Wt,Ft,!1,null,null,null),Kt=Xt.exports,Yt=function(t){var e=t.body,n=t.actions,r=t.input;return new Promise((function(t){var i=O()("#confirm_modal");O()(i).find(".modal-body").text(e);var o=n||[{action:"0",style:"secondary",text:"Нет"},{action:"1",style:"primary",text:"Да"}],s=o.map((function(t){var e=O()('<button class="btn" type="button"></button>');return O()(e).attr("data-action",t.action).addClass("btn-".concat(t.style)).text(t.text),e}));if(O()(i).find(".modal-footer").html(s),r){var a=O()('<input id="data" type="'.concat(r.type,'" placeholder="').concat(r.placeholder,'" />'));O()(a).addClass("form-control mt-3"),O()(i).find(".modal-body").append(a)}O()(i).modal("show").on("hide.bs.modal",(function(e){var n=O()(e.target).attr("data-result");if(r&&"1"===n){var o=O()(i).find("#data").val();t(o)}else t("1"===n);O()(i).off("hide.bs.modal")}))}))},Gt={components:{ChangeLineByEnd:Kt},data:function(){return{choosedPoint:null,lengthInMm:0}},computed:{parts:function(){return this.$store.getters.parts},selectedEl:function(){return this.$store.getters.selectedEl},part:function(){return this.parts[this.selectedEl.i]},element:function(){return this.selectedEl.el},elementId:function(){return this.element.id},points:function(){var t=this.clone(this.element.points),e=this.element.pointsId;return t=[{x:t[0],y:t[1],id:e[0]},{x:t[2],y:t[3],id:e[1]}].sort((function(t,e){return t.x-e.x})),t[0].x===t[1].x&&(t=t.sort((function(t,e){return t.y-e.y}))),t},pxPerMm:function(){return this.$store.state.pxPerMm},currentLengthInMm:function(){var t=Object(Nt["a"])(this.points,2),e=t[0],n=t[1],r=Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));return Math.round(r)}},watch:{points:{handler:function(){this.getLength()},immediate:!0}},methods:{getLength:function(){this.lengthInMm=this.currentLengthInMm},setBorderLength:function(){var t=this;return Object(Ht["a"])(regeneratorRuntime.mark((function e(){var n,r,i,o,s,a,d,c,u,l,p,h,m,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.getLinearEquation(),r=n.m,i=n.n,o=t.points,s="both"===t.choosedPoint?[0,1]:[t.choosedPoint],a=[],d=t.currentLengthInMm,c=(o[0].x-o[1].x)/d,u=t.lengthInMm,s.forEach((function(e){var n=t.clone(o[e]),s=e?t.clone(o[0]):t.clone(o[1]),l="both"===t.choosedPoint?(u-d)/2:u-d;if(n.x===s.x){var p=n.y>s.y?1:-1;n.y+=l*p}else if(n.y===s.y){var h=n.x>s.x?1:-1;n.x+=l*h}else{var m=n.y>s.y&&r<0||n.y<s.y&&r>0?1:-1,f=c*l*m;n.x+=f,n.y=n.x*r+i}a.push(n)})),l=t.selectedEl.i,p=t.checkIfNeedFixCurvesRadiuses(a,l),!p.length){e.next=17;break}return h="При изменении данной длины будут увеличены радиус(ы) прилегающих выпуклых/вогнутых линий. Продолжить?",e.next=14,Yt({body:h});case 14:if(m=e.sent,m){e.next=17;break}return e.abrupt("return");case 17:p.length&&p.forEach((function(e){var n=e.j,r=e.radius;t.$store.dispatch("changeRadius",{i:l,j:n,radius:r})})),f=[],t.parts[l].points.some((function(e,n){var r=a.findIndex((function(t){return t.id===e.id}));return r>=0&&(["inset","bulge"].includes(e.subType)&&f.push({insetBulgeId:e.insetBulgeId,fromPointId:e.id,x:a[r].x-e.c[0],y:a[r].y-e.c[1]}),t.$store.dispatch("changePoint",{i:l,j:n,point:a.splice(r,1)[0]})),!a.length})),f.length&&f.forEach((function(e){var n=t.part.insetsBulges.find((function(t){return t.id===e.insetBulgeId}));n.pointsId.filter((function(t){return t!==e.fromPointId})).forEach((function(n){var r=t.part.points.findIndex((function(t){return t.id===n})),i=Object(Nt["a"])(t.part.points[r].c,2),o=i[0],s=i[1];t.$store.dispatch("changePoint",{i:l,j:r,point:{x:o+e.x,y:s+e.y}})}))}));case 21:case"end":return e.stop()}}),e)})))()},getLinearEquation:function(){var t=this.points,e=(t[1].y-t[0].y)/(t[1].x-t[0].x),n=-t[0].x*e+t[0].y;return{m:e,n:n}},checkIfNeedFixCurvesRadiuses:function(t,e){var n=t.map((function(t){return t.id})),r=[];return this.parts[e].borders.some((function(e,i){if("curveBorder"!==e.type)return!1;var o=e.pointsId.findIndex((function(t){return n.includes(t)}));if(o<0)return!1;var s=t.find((function(t){return t.id===e.pointsId[o]})),a=0===o?{x:e.points[2],y:e.points[3]}:{x:e.points[0],y:e.points[1]},d=Math.sqrt(Math.pow(a.x-s.x,2)+Math.pow(a.y-s.y,2))/2+2;return!(e.radius>=d)&&(r.push({j:i,radius:d}),!0)})),r}}},Qt=Gt,Vt=Object(b["a"])(Qt,Dt,qt,!1,null,null,null),Zt=Vt.exports,te=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("form",{on:{submit:function(e){return e.preventDefault(),t.setParams(e)}}},[n("div",{staticClass:"form-group row no-gutters"},[n("label",{staticClass:"col-auto col-form-label text-left"},[t._v("Радиус")]),n("div",{staticClass:"col-auto px-1"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.radiusInMm,expression:"radiusInMm"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.radiusInMm},on:{input:function(e){e.target.composing||(t.radiusInMm=e.target.value)}}})]),n("span",{staticClass:"col-auto d-flex align-items-center"},[t._v("мм")]),n("div",{staticClass:"w-100"}),n("small",{staticClass:"form-text text-muted col-auto text-left"},[t._v(" "+t._s("Минимальный радиус "+t.minRadius+" мм")+" ")])]),n("div",{staticClass:"form-group row no-gutters"},[n("label",{staticClass:"col-auto col-form-label text-left"},[t._v("Длина по прямой")]),n("div",{staticClass:"col-auto px-1"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.lengthInMm,expression:"lengthInMm"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.lengthInMm},on:{input:function(e){e.target.composing||(t.lengthInMm=e.target.value)}}})]),n("span",{staticClass:"col-auto d-flex align-items-center"},[t._v("мм")]),n("div",{staticClass:"w-100"}),n("small",{staticClass:"form-text text-muted col-auto text-left"},[t._v(" "+t._s("Максимальная длина "+t.maxLength+" мм")+" ")])]),n("div",{staticClass:"form-group row no-gutters"},[t._m(0),n("div",{staticClass:"col-auto"},[n("change-line-by-end",{attrs:{element:t.element,points:t.points},on:{setChoosedPoint:function(e){t.choosedPoint=e}}})],1)])])])},ee=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-auto text-left"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Установить")])])}],ne=n("854a"),re=n.n(ne),ie={components:{ChangeLineByEnd:Kt},data:function(){return{radiusInMm:0,choosedPoint:null,lengthInMm:0}},computed:{parts:function(){return this.$store.getters.parts},selectedEl:function(){return this.$store.getters.selectedEl},element:function(){return this.selectedEl.el},elementId:function(){return this.element.id},pxPerMm:function(){return this.$store.state.pxPerMm},points:function(){var t=this.clone(this.element.points),e=this.element.pointsId;return t=[{x:t[0],y:t[1],id:e[0]},{x:t[2],y:t[3],id:e[1]}].sort((function(t,e){return t.x-e.x})),t[0].x===t[1].x&&(t=t.sort((function(t,e){return t.y-e.y}))),t},currentLengthInMm:function(){var t=Object(Nt["a"])(this.points,2),e=t[0],n=t[1],r=Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));return Math.round(r)},minRadius:function(){return Math.round(this.lengthInMm/2)+2},maxLength:function(){return 2*this.radiusInMm-2}},watch:{points:{handler:function(){this.radiusInMm=Math.round(this.element.radius),this.lengthInMm=this.currentLengthInMm},immediate:!0}},methods:{setParams:function(){this.lengthInMm>this.maxLength?re.a.warning("При таком радиусе длина не может быть больше ".concat(this.maxLength," мм")):this.radiusInMm<this.minRadius?re.a.warning("Радиус не может быть меньше ".concat(this.minRadius," мм")):(this.setRadius(),this.setBorderLength())},setRadius:function(){var t=this.selectedEl,e=t.i,n=t.j;this.$store.dispatch("changeRadius",{i:e,j:n,radius:this.radiusInMm})},setBorderLength:function(){var t=this;return Object(Ht["a"])(regeneratorRuntime.mark((function e(){var n,r,i,o,s,a,d,c,u,l,p,h,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.getLinearEquation(),r=n.m,i=n.n,o=t.points,s="both"===t.choosedPoint?[0,1]:[t.choosedPoint],a=[],d=t.currentLengthInMm,c=(o[0].x-o[1].x)/d,u=t.lengthInMm,s.forEach((function(e){var n=t.clone(o[e]),s=e?t.clone(o[0]):t.clone(o[1]),l="both"===t.choosedPoint?(u-d)/2:u-d;if(n.x===s.x){var p=n.y>s.y?1:-1;n.y+=l*p}else if(n.y===s.y){var h=n.x>s.x?1:-1;n.x+=l*h}else{var m=n.y>s.y&&r<0||n.y<s.y&&r>0?1:-1,f=c*l*m;n.x+=f,n.y=n.x*r+i}a.push(n)})),l=t.selectedEl.i,p=t.checkIfNeedFixCurvesRadiuses(a,l),!p.length){e.next=17;break}return h="При изменении данной длины будут увеличены радиус(ы) прилегающих выпуклых/вогнутых линий. Продолжить?",e.next=14,Yt({body:h});case 14:if(m=e.sent,m){e.next=17;break}return e.abrupt("return");case 17:p.length&&p.forEach((function(e){var n=e.j,r=e.radius;t.$store.dispatch("changeRadius",{i:l,j:n,radius:r})})),t.parts[l].points.some((function(e,n){var r=a.findIndex((function(t){return t.id===e.id}));return r>=0&&t.$store.dispatch("changePoint",{i:l,j:n,point:a.splice(r,1)[0]}),!a.length}));case 19:case"end":return e.stop()}}),e)})))()},getLinearEquation:function(){var t=this.points,e=(t[1].y-t[0].y)/(t[1].x-t[0].x),n=-t[0].x*e+t[0].y;return{m:e,n:n}},checkIfNeedFixCurvesRadiuses:function(t,e){var n=t.map((function(t){return t.id})),r=[];return this.parts[e].borders.some((function(e,i){if("curveBorder"!==e.type)return!1;var o=e.pointsId.findIndex((function(t){return n.includes(t)}));if(o<0)return!1;var s=t.find((function(t){return t.id===e.pointsId[o]})),a=0===o?{x:e.points[2],y:e.points[3]}:{x:e.points[0],y:e.points[1]},d=Math.sqrt(Math.pow(a.x-s.x,2)+Math.pow(a.y-s.y,2))/2+2;return!(e.radius>=d)&&(r.push({j:i,radius:d}),!0)})),r}}},oe=ie,se=Object(b["a"])(oe,te,ee,!1,null,null,null),ae=se.exports,de=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("form",{on:{submit:function(e){return e.preventDefault(),t.setParams(e)}}},[n("div",{staticClass:"form-group row no-gutters"},[n("label",{staticClass:"col-auto col-form-label text-left"},[t._v("Внешняя длина")]),n("div",{staticClass:"col-auto px-1"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.outLengthInMm,expression:"outLengthInMm"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.outLengthInMm},on:{input:function(e){e.target.composing||(t.outLengthInMm=e.target.value)}}})]),n("span",{staticClass:"col-auto d-flex align-items-center"},[t._v("мм")])]),n("div",{staticClass:"form-group row no-gutters"},[n("label",{staticClass:"col-auto col-form-label text-left"},[t._v("Внутренняя длина")]),n("div",{staticClass:"col-auto px-1"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.inLengthInMm,expression:"inLengthInMm"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.inLengthInMm},on:{input:function(e){e.target.composing||(t.inLengthInMm=e.target.value)}}})]),n("span",{staticClass:"col-auto d-flex align-items-center"},[t._v("мм")])]),n("div",{staticClass:"form-group row no-gutters"},[n("label",{staticClass:"col-auto col-form-label text-left"},[t._v("Глубина")]),n("div",{staticClass:"col-auto px-1"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.depthInMm,expression:"depthInMm"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.depthInMm},on:{input:function(e){e.target.composing||(t.depthInMm=e.target.value)}}})]),n("span",{staticClass:"col-auto d-flex align-items-center"},[t._v("мм")])]),t._m(0)])])},ce=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-group row no-gutters"},[n("div",{staticClass:"col-auto text-left"},[n("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Установить")])])])}],ue={data:function(){return{outLengthInMm:0,inLengthInMm:0,depthInMm:0}},computed:{parts:function(){return this.$store.getters.parts},selectedEl:function(){return this.$store.getters.selectedEl},element:function(){return this.selectedEl.el},points:function(){var t=this,e=this.element.pointsId.map((function(e,n){return{id:e,c:[t.element.points[2*n],t.element.points[2*n+1]]}}));return{out:"inset"===this.element.type?[e[0],e[3]]:[e[1],e[2]],in:"inset"===this.element.type?[e[1],e[2]]:[e[0],e[3]]}},currentOutLength:function(){var t=this.points.out.map((function(t){return t.c}));return Math.sqrt(Math.pow(t[1][0]-t[0][0],2)+Math.pow(t[1][1]-t[0][1],2))},currentInLength:function(){var t=this.points.in.map((function(t){return t.c}));return Math.sqrt(Math.pow(t[1][0]-t[0][0],2)+Math.pow(t[1][1]-t[0][1],2))}},watch:{points:{handler:function(){this.outLengthInMm=Math.round(this.currentOutLength),this.inLengthInMm=Math.round(this.currentInLength),this.depthInMm=this.element.depth},immediate:!0}},methods:{setParams:function(){if(Math.round(this.outLengthInMm)!==Math.round(this.currentOutLength)&&this.setPoints(this.points.out,this.outLengthInMm,this.currentOutLength),Math.round(this.inLengthInMm)!==Math.round(this.currentInLength)&&this.setPoints(this.points.in,this.inLengthInMm,this.currentInLength),Math.round(this.depthInMm)!==Math.round(this.element.depth)){var t=this.points["inset"===this.element.type?"in":"out"];this.setDepth(t,this.depthInMm,this.element.depth)}},setPoints:function(t,e,n){var r=new U.a(t[0].c[0],t[0].c[1]),i=new U.a(t[1].c[0]-t[0].c[0],t[1].c[1]-t[0].c[1]),o=Math.abs(e-n)/2,s=e>n?180:0;i=i.norm().rotateDeg(s).multiply(new U.a(o,o)),r=i.clone().add(r),this.setPoint({id:t[0].id,c:r.toObject()}),i=i.norm().rotateDeg(s).multiply(new U.a(e,e)),r=i.clone().add(r),this.setPoint({id:t[1].id,c:r.toObject()})},setPoint:function(t){var e={i:this.selectedEl.i,j:this.parts[this.selectedEl.i].points.findIndex((function(e){return e.id===t.id})),point:t.c};this.$store.dispatch("changePoint",e)},setDepth:function(t,e,n){var r=new U.a(t[0].c[0],t[0].c[1]),i=new U.a(t[1].c[0]-t[0].c[0],t[1].c[1]-t[0].c[1]),o=i.length(),s=Math.abs(e-n),a=e>n&&"inset"===this.element.type||e<n&&"bulge"===this.element.type?1:-1;i=i.norm().rotateDeg(90*a).multiply(new U.a(s,s)),r=i.clone().add(r),this.setPoint({id:t[0].id,c:r.toObject()}),i=i.norm().rotateDeg(-90*a).multiply(new U.a(o,o)),r=i.clone().add(r),this.setPoint({id:t[1].id,c:r.toObject()});var d=this.selectedEl,c=d.i,u=d.j;this.$store.commit("setInsetBulgeDepth",{i:c,j:u,depth:e})}}},le=ue,pe=Object(b["a"])(le,de,ce,!1,null,null,null),he=pe.exports,me=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("p",{staticClass:"mb-0 text-left"},[t._v("Тип")]),t._l(t.types,(function(e){return n("div",{key:e.type,staticClass:"custom-control custom-radio text-left"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedType,expression:"selectedType"}],staticClass:"custom-control-input",attrs:{type:"radio",id:e.type},domProps:{value:e.type,checked:t._q(t.selectedType,e.type)},on:{change:function(n){t.selectedType=e.type}}}),n("label",{staticClass:"custom-control-label d-flex align-items-center",attrs:{for:e.type}},[n("img",{staticClass:"mx-2",staticStyle:{width:"1rem"},attrs:{src:t.files[e.type].src}}),t._v(" "+t._s(e.name)+" ")])])}))],2)},fe=[],xe={props:["initType"],data:function(){return{types:[{name:"Empty",type:"empty"},{name:"Half",type:"half"},{name:"Full",type:"full"}],selectedType:this.initType}},computed:{selectedEl:function(){return this.$store.getters.selectedEl},files:function(){return this.$store.state.files.edges}},watch:{selectedType:function(t){var e=this.selectedEl,n=e.i,r=e.j;this.$store.commit("setEdgeType",{i:n,j:r,edgeType:t})}}},ge=xe,ve=Object(b["a"])(ge,me,fe,!1,null,null,null),Ie=ve.exports,be={components:{LineBorder:Zt,CurveBorder:ae,InsetBulge:he,Edge:Ie},computed:{element:function(){return this.$store.getters.selectedEl.el}}},ye=be,Me=(n("ef9c"),Object(b["a"])(ye,zt,Rt,!1,null,null,null)),Ee=Me.exports,we={mixins:[g],components:{ContextMenu:D,Part:Lt,ElementMenu:Ee},data:function(){return{}},computed:{contextMenuAction:function(){return this.$store.state.contextMenuAction},parts:function(){return this.$store.getters.parts},canvasHeightInMm:function(){return this.$store.state.canvasHeightInMm}},mounted:function(){var t=this,e=this.$el.clientHeight/this.canvasHeightInMm;this.$store.commit("setPxPerMm",e);var n=this.$el.clientWidth/e;this.$store.commit("setCanvasWidthInMm",n);var r=1e3,i=2e3,o=[(n-r)/2,(this.canvasHeightInMm-i)/2],s={id:this.getId(),position:{x:0,y:0},type:"polygon",points:[{id:this.getId(),c:o},{id:this.getId(),c:[o[0]+r,o[1]]},{id:this.getId(),c:[o[0]+r,o[1]+i]},{id:this.getId(),c:[o[0],o[1]+i]}]};s.borders=s.points.map((function(){return{id:t.getId(),type:"lineBorder",sizeArrow:"outside",radiusPosition:"usual"}})),O()(this.$refs.nocontext).on("contextmenu",(function(t){return t.preventDefault()}))},methods:{deselect:function(t){"stage"===t.target.attrs.type&&this.$store.commit("setSelectedElId",null)}}},Pe=we,Ce=Object(b["a"])(Pe,_,j,!1,null,null,null),$e=Ce.exports,Be={components:{Konva:$e},data:function(){return{isMounted:!1}},mounted:function(){this.isMounted=!0}},_e=Be,je=Object(b["a"])(_e,$,B,!1,null,null,null),ke=je.exports,Oe={components:{Manage:C,Canvas:ke}},Se=Oe,Ae=Object(b["a"])(Se,l,p,!1,null,null,null),Te=Ae.exports,Le=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"modal",staticClass:"modal",attrs:{id:"confirm_modal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true","data-result":t.result}},[t._m(0)])},ze=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[n("div",{staticClass:"modal-content"},[n("div",{staticClass:"modal-header"},[n("h5",{staticClass:"modal-title"},[t._v("Подтверждение")]),n("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[n("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),n("div",{staticClass:"modal-body",staticStyle:{"white-space":"pre-wrap"}},[n("div",{staticClass:"text"}),n("div",{staticClass:"input mt-3"})]),n("div",{staticClass:"modal-footer"})])])}],Re=(n("a9e3"),{data:function(){return{result:0}},mounted:function(){var t=this;O()(this.$refs.modal).on("show.bs.modal",(function(){t.result=0})),O()(this.$refs.modal).on("click",".modal-footer > button",(function(e){t.result=Number(O()(e.target).attr("data-action")),setTimeout((function(){O()(t.$refs.modal).modal("hide")}),0)}))}}),De=Re,qe=Object(b["a"])(De,Le,ze,!1,null,null,null),He=qe.exports,Ne={name:"App",components:{Drawer:Te,ConfirmModal:He},created:function(){this.$store.dispatch("downloadEdges")}},We=Ne,Fe=(n("5c0b"),Object(b["a"])(We,c,u,!1,null,null,null)),Je=Fe.exports,Ue=(n("b0c0"),n("b64b"),n("2f62")),Xe=n("15fd"),Ke=function(t){return JSON.parse(JSON.stringify(t))},Ye={state:{partsInit:[],refreshSelectedElTrigger:0,defaultEdgeType:"empty"},getters:{parts:function(t,e,n){return t.partsInit.map((function(t){var e=Ke(t),r=e.points,i=e.borders,o=n.pxPerMm;return r.forEach((function(t,n){var s=n<r.length-1?n+1:0;i[n].points=[].concat(Object(N["a"])(t.c),Object(N["a"])(r[s].c)),i[n].pointsId=[t.id,r[s].id];var a=n?n-1:r.length-1;if(r[n].bordersId=[i[n].id,i[a].id],r[n].pBId=[].concat(Object(N["a"])(r[n].bordersId),[t.id]),r[n].cInPx=t.c.map((function(t){return t*o})),i[n].pointsInPx=i[n].points.map((function(t){return t*o})),i[n].radius&&(i[n].radiusInPx=i[n].radius*o),["inset","bulge"].includes(t.subType)){var d,c,u=e.insetsBulges.findIndex((function(e){return e.id===t.insetBulgeId}));(d=e.insetsBulges[u].points).push.apply(d,Object(N["a"])(t.c)),(c=e.insetsBulges[u].pointsInPx).push.apply(c,Object(N["a"])(r[n].cInPx))}})),e}))},canvasSizeInPx:function(t,e,n){var r=n.canvasHeightInMm,i=n.canvasWidthInMm,o=n.pxPerMm,s={width:0,height:0};return i&&(s.width=i*o,s.height=r*o),s},boundingBoxes:function(t,e){return e.parts.map((function(t){var e=t.points.map((function(t){return t.cInPx[0]})),n=t.points.map((function(t){return t.cInPx[1]})),r={id:t.id,absolute:{x1:Math.min.apply(Math,Object(N["a"])(e)),x2:Math.max.apply(Math,Object(N["a"])(e)),y1:Math.min.apply(Math,Object(N["a"])(n)),y2:Math.max.apply(Math,Object(N["a"])(n))}};return r.relative={x1:r.absolute.x1+t.position.x,x2:r.absolute.x2+t.position.x,y1:r.absolute.y1+t.position.y,y2:r.absolute.y2+t.position.y},r.width=Math.abs(r.absolute.x2-r.absolute.x1),r.height=Math.abs(r.absolute.y2-r.absolute.y1),r}))},selectedEl:function(t,e,n){var r=n.selectedElId;if(!r)return{};var i={};return e.parts.some((function(t,e){var n="points",o=null,s=t.points.findIndex((function(t){return t.id===r}));return s<0&&(o=null,n="borders",s=t.borders.findIndex((function(t){return t.id===r}))),s<0&&(o="edge",n="borders",s=t.borders.findIndex((function(t){return t.edge&&t.edge.id===r}))),s<0&&t.insetsBulges&&(o=null,n="insetsBulges",s=t.insetsBulges.findIndex((function(t){return t.id===r}))),!(s<0)&&(i={i:e,j:s,el:o?t[n][s][o]:t[n][s]},!0)})),i}},mutations:{addPart:function(t,e){t.partsInit.push(e)},movePoint:function(t,e){var n=e.partIndex,i=e.pointIndex,o=e.c;r["default"].set(t.partsInit[n].points[i],"c",o)},addPoint:function(t,e){var n=e.partIndex,r=e.pointIndex,i=e.point;t.partsInit[n].points.splice(r,0,i)},addBorder:function(t,e){var n=e.partIndex,r=e.borderIndex,i=e.border;t.partsInit[n].borders.splice(r,0,i)},deleteBorder:function(t,e){var n=e.partIndex,r=e.borderIndex;t.partsInit[n].borders.splice(r,1)},deletePoint:function(t,e){var n=e.partIndex,r=e.pointIndex;t.partsInit[n].borders.splice(r,1),t.partsInit[n].points.splice(r,1)},makeBorderCurve:function(t,e){var n=e.partIndex,i=e.borderIndex,o=e.radius,s=Ke(t.partsInit[n].borders[i]);r["default"].set(t.partsInit[n].borders,i,Object.assign(s,{type:"curveBorder",radius:o,isInside:e.isInside}))},makeBorderLine:function(t,e){var n=e.partIndex,i=e.borderIndex,o=Ke(t.partsInit[n].borders[i]);delete o.radius,delete o.isInside,o.type="lineBorder",r["default"].set(t.partsInit[n].borders,i,o)},addInsetBulge:function(t,e){var n=e.partIndex,i=Object(Xe["a"])(e,["partIndex"]),o=t.partsInit[n].insetsBulges||[];i.points=[],o.push(Object(T["a"])(Object(T["a"])({},i),{},{pointsInPx:[],type:e.type})),r["default"].set(t.partsInit[n],"insetsBulges",o)},setInsetBulgeDepth:function(t,e){var n=e.i,i=e.j,o=e.depth;r["default"].set(t.partsInit[n].insetsBulges[i],"depth",o)},deleteInsetBulge:function(t,e){var n=e.partIndex,r=e.insetBulgeIndex;t.partsInit[n].insetsBulges.splice(r,1)},refreshSelectedEl:function(t){setTimeout((function(){t.refreshSelectedElTrigger=Math.random()}),0)},changePoint:function(t,e){var n=e.i,i=e.j,o=e.point;r["default"].set(t.partsInit[n].points[i],"c",[o.x,o.y])},changeRadius:function(t,e){var n=e.i,i=e.j,o=e.radius;r["default"].set(t.partsInit[n].borders[i],"radius",o)},setPartPosition:function(t,e){var n=e.i,i=e.pos;r["default"].set(t.partsInit[n],"position",i)},changeSizeArrow:function(t,e){var n=e.i,i=e.j,o=e.sizeArrow;r["default"].set(t.partsInit[n].borders[i],"sizeArrow",o)},changeRadiusPosition:function(t,e){var n=e.i,i=e.j,o=e.radiusPosition;r["default"].set(t.partsInit[n].borders[i],"radiusPosition",o)},showHideAngle:function(t,e){var n=e.i,i=e.j,o=e.angleTag;r["default"].set(t.partsInit[n].points[i],"angleTag",o)},addHideEdge:function(t,e){var n=e.i,i=e.j,o=e.action;if("addEdge"===o){var s={edgeType:t.defaultEdgeType,id:e.id,type:"edge"};r["default"].set(t.partsInit[n].borders[i],"edge",s)}else r["default"].delete(t.partsInit[n].borders[i],"edge")},setEdgeType:function(t,e){var n=e.i,i=e.j,o=e.edgeType;r["default"].set(t.partsInit[n].borders[i].edge,"edgeType",o),t.defaultEdgeType=o},toggleSkirting:function(t,e){var n=e.i,i=e.j;r["default"].set(t.partsInit[n].borders[i],"skirting",!t.partsInit[n].borders[i].skirting)}},actions:{refreshSelectedEl:function(t){var e=t.commit,n=t.rootState;n.selectedEl&&e("refreshSelectedEl")},makeBorderCurve:function(t,e){var n=t.commit,r=t.dispatch;n("makeBorderCurve",e),r("refreshSelectedEl")},makeBorderLine:function(t,e){var n=t.commit,r=t.dispatch;n("makeBorderLine",e),r("refreshSelectedEl")},changePoint:function(t,e){var n=t.commit;n("changePoint",e)},changeRadius:function(t,e){var n=t.commit;n("changeRadius",e)}}};r["default"].use(Ue["a"]);var Ge=new Ue["a"].Store({state:{canvasHeightInMm:4e3,pxPerMm:0,contextMenuEvent:null,contextMenuAction:{},selectedElId:null,currentElId:null,id:0,fontSizeInmM:{sizeArrow:90,radius:90},files:{edges:{}}},getters:{gridSize:function(){return 10}},mutations:{setPxPerMm:function(t,e){t.pxPerMm=e},setCanvasWidthInMm:function(t,e){r["default"].set(t,"canvasWidthInMm",e)},setContextMenuEvent:function(t,e){t.contextMenuEvent=e},setContextMenuAction:function(t,e){t.contextMenuAction=e},setSelectedElId:function(t,e){t.selectedElId=e},setCurrentEl:function(t,e){t.currentElId=e},incrementId:function(t){t.id+=1},addFile:function(t,e){r["default"].set(t.files[e.type],e.name,e.image)}},actions:{downloadEdges:function(t){var e=t.commit,r={empty:n("b39e"),half:n("c101"),full:n("eabb"),emptyHover:n("2e97"),halfHover:n("6192"),fullHover:n("7e33")};Object.keys(r).forEach((function(t){var n=new Image;n.onload=function(n){e("addFile",{type:"edges",name:t,image:n.target})},n.src=r[t]}))}},modules:{parts:Ye}});s["c"].add(a["a"],a["c"],a["b"]),r["default"].component("font-awesome-icon",d["a"]),r["default"].config.productionTip=!1,r["default"].use(o.a),r["default"].mixin({methods:{clone:function(t){return JSON.parse(JSON.stringify(t))}}}),new r["default"]({store:Ge,render:function(t){return t(Je)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var r=n("9c0c"),i=n.n(r);i.a},6192:function(t,e,n){t.exports=n.p+"dist/img/edge_half_hover.77c826da.svg"},"7e33":function(t,e,n){t.exports=n.p+"dist/img/edge_full_hover.160c4524.svg"},"9c0c":function(t,e,n){},b39e:function(t,e,n){t.exports=n.p+"dist/img/edge_empty.3662e72a.svg"},c101:function(t,e,n){t.exports=n.p+"dist/img/edge_half.10bb9dfa.svg"},eabb:function(t,e,n){t.exports=n.p+"dist/img/edge_full.a70ba3da.svg"},ef9c:function(t,e,n){"use strict";var r=n("39d3"),i=n.n(r);i.a}});
//# sourceMappingURL=app.b2890c6a.js.map